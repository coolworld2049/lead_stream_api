generator client {
  provider                    = "prisma-client-py"
  enable_experimental_decimal = true
  interface                   = asyncio
  recursive_type_depth        = 2
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Lead {
  id                  Int                  @id @default(autoincrement())
  type                String               @db.VarChar(255)
  token               String               @db.VarChar(64)
  product             Int
  applied_at          DateTime             @default(now()) @db.Timestamptz(3)
  stream              String               @db.VarChar(64)
  sales               Json[]
  meta                Json
  user                Json
  consent             Json
  mailing_consent     Json
  codes               Json
  passport            Json
  credit              Json
  income              Json
  addr_reg            Json
  addr_fact           Json
  leadCreateResponses LeadCreateResponse[] // Added relationship field
}

model LeadCreateResponse {
  id                         Int                          @id @default(autoincrement())
  status                     String
  details                    Json
  leadId                     Int // Foreign key field to Lead
  lead                       Lead                         @relation(fields: [leadId], references: [id])
  leadCreateResponseCampaign LeadCreateResponseCampaign[] // Relationship field
}

model LeadCreateResponseCampaign {
  id         Int                @id @default(autoincrement())
  campaignID String
  status     String
  responseId Int
  response   LeadCreateResponse @relation(fields: [responseId], references: [id])
}
